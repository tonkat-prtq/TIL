# 今日のYWT

## やったこと

### 出るとこだけ!基本情報技術者 午後

- 出る順1位 SQLその1
  - 結合条件式
  - COUNTの違い
  - 集合関数
  - GROUP BYの解き方
  - HAVINGとWHERE

### Laravel(+Vue.js)でSNS風Webサービスを作ろう

- 2-4 コントローラーの確認とバリデーションの変更まで
  - Articleテーブル作成
  - Articleモデル追加
  - User周りのルーティング追加
  - リダイレクト先をhomeから/に変更
  - バリデーションの変更

## わかったこと

### SQL

- 内部結合
  - 両方の表に存在する行だけを表示する

- 結合条件式
  - 最低限必要な結合条件式の個数 = FROMの表の個数 - 1
    - FROMに3つ表があった場合、結合条件式は最低でも2つ必要
  - 表を結合するSQL文では、結合する表と表の間に共通する列を結合条件式に含まなければならない

- `COUNT`の違い
  - `COUNT(*)`
    - NULLの値を含む全ての行数
  - `COUNT(列名)`
  - `COUNT(ALL 列名)`
    - NULLの値を除いた行数
  - `COUNT(DISTINCT 列名)`
    - NULLの値を除き、同じ値の重複を省いた行数

- 集合関数の入れ子
  - ❎`SELECT AVG(SUM(身長)) FROM 社員表`
    - 集合関数の中に集合関数を入れる表現はできない。AVGの中にSUMが入っているので不可
  - ⭕ `SELECT AVG(身長) FROM 社員表`

- `GROUP BY`
  - 「各」「ごと」「別」という表現があるとき使う
  - `GROUP BY`に空所がある場合
    - `SELECT`にある列を入れる
      - ただし集合関数の列は記述しなくてもよい

- `HAVING`
  - `GROUP BY`のあとの`HAVING`に入るものは下のどちらか
    - `GROUP BY`にある列の式
    - 集合関数のある式

### Laravel

#### `{!! nl2br(e( $article->body )) !!}`

1. `e( $article->body )`で、bodyの中の特殊文字( `<` や `>` など)をエスケープ

- 記事本文(body)に例えば`<br>`や`<b>hoge</b>` が書かれていたとしても、ブラウザにHTMLタグと認識されないようエスケープされた上で2の処理に渡されます

2. `nl2br()`で、改行を`<br>`に変換

- 1から渡された記事本文中にもし改行があれば、その部分が`<br>`に変換されます
`{!! !!}`で特殊文字(`<` や`>` など)をエスケープせずに出力する

3. 2の処理で`<br>`に変換された箇所があれば、その箇所はブラウザではHTMLタグとして解釈され改行として処理されます(3の処理ではエスケープしないので)

#### バリデーションの記述

- `validator`の中身を編集すればよい

## 次やること

- 午後試験対策本のSQL2